import{j as t,g as u,h,i as p,k as x,l as v,m as j,n as I}from"./tree-view.D9ir_m6l.js";import{r as c}from"./index.B1Zo4ZAB.js";import{S as f}from"./stack.CY4SGiac.js";import{H as b}from"./hstack.BbC6lqko.js";const g=i=>{const{items:n=[],activeItem:r}=i,[a,e]=c.useState();return c.useEffect(()=>{if(r){e(r);return}document.addEventListener("astro:after-swap",()=>{e(window.location.pathname)}),e(window.location.pathname)},[r]),t.jsxs(u,{value:a,orientation:"vertical",size:{base:"md",md:"sm"},children:[n.map((s,l)=>t.jsx("a",{href:s.href,style:{display:"flex",width:"fit-content"},children:t.jsxs(h,{value:s.href,"data-orientation":"vertical",children:[t.jsx(p,{}),t.jsx(x,{children:t.jsxs(b,{gap:"2",children:[s.title,s.label&&t.jsx(v,{size:"sm",children:s.label})]})})]})},l)),t.jsx(j,{hidden:!n.some(s=>s.href===a)})]})},A=i=>{const{headings:n=[]}=i,r=n.filter(e=>e.depth===2).map(e=>({title:e.text,href:"#"+e.slug})),a=S(r.map(e=>e.href));return t.jsxs(f,{gap:"3",children:[t.jsx(I,{textStyle:{base:"md",md:"sm"},fontWeight:"semibold",children:"On this page"}),t.jsx(f,{children:t.jsx(g,{items:r,activeItem:a})})]})},S=i=>{const[n,r]=c.useState(i[0]),[a,e]=c.useState(),s=c.useRef(null);return c.useEffect(()=>{const l=i.map(o=>document.querySelector(`[id='${o.replace("#","")}']`));return s.current=new IntersectionObserver(o=>{o.forEach(m=>{const d="#"+m.target.getAttribute("id");m?.isIntersecting?(e(n),r(d)):(d===a&&e(null),n===d&&a&&r(a))})},{rootMargin:"-30% 0px"}),l.forEach(o=>{o&&s.current?.observe(o)}),()=>s.current?.disconnect()},[i]),n};export{A as TableOfContent};
